<!doctype html><html lang="no"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ny annonse • GA-13</title>
<link rel="stylesheet" href="/style.css">
</head><body>
<header class="site-header"><div class="wrap">
  <h1>Ny annonse</h1>
  <nav class="main-nav"><a href="/market.html">Tilbake</a></nav>
</div></header>

<main class="wrap">
  <form id="f" class="card" style="max-width:720px">
    <label>Tittel</label>
    <input name="title" required placeholder="Hva selger du?" style="width:100%;padding:10px;margin:8px 0">

    <label>Pris (NOK)</label>
    <input type="number" name="price" min="0" step="1" required placeholder="0" style="width:100%;padding:10px;margin:8px 0">

    <label>Kategori</label>
    <select name="category" style="width:100%;padding:10px;margin:8px 0">
      <option>Elektronikk</option>
      <option>Sport & friluftsliv</option>
      <option>Møbler og interiør</option>
      <option>Klær</option>
      <option selected>Annet</option>
    </select>

    <label>Bilde-URL</label>
    <input name="imageUrl" placeholder="https://…" style="width:100%;padding:10px;margin:8px 0">

    <label>Sted</label>
    <input name="location" placeholder="By/område" style="width:100%;padding:10px;margin:8px 0">

    <label>Beskrivelse</label>
    <textarea name="description" rows="5" placeholder="Fortell litt…" style="width:100%;padding:10px;margin:8px 0"></textarea>

    <label>Kontakt (e-post)</label>
    <input name="owner" type="email" placeholder="din@epost.no" style="width:100%;padding:10px;margin:8px 0">

    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px">
      <button class="btn" type="submit">Publiser</button>
      <a class="btn ghost" href="/market.html">Avbryt</a>
    </div>
  </form>
  <p class="muted">* Bildelasting kommer senere – inntil videre limer du inn en bilde-URL.</p>
</main>

<script>
const form = document.getElementById('f');
form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const body = Object.fromEntries(new FormData(form).entries());
  body.price = Number(body.price || 0);

  const res = await fetch('/api/ads', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(body)
  });
  if(!res.ok){ alert('Klarte ikke å publisere.'); return; }
  const ad = await res.json();
  location.href = '/ad.html?id=' + ad.id;
});
</script>
</body></html>